AWSTemplateFormatVersion: "2010-09-09"

Description: Secrets management layer for TinyDevCRM

Resources:
  KMSKey:
    Type: "AWS::KMS::Key"
    Properties:
      Description: Customer master key for AWS Secrets Management Service
      EnableKeyRotation: true
      Enabled: true
      KeyPolicy:
        Version: '2012-10-17'
        Id: tinydevcrm-kms-policy
        Statement:
        - Action:
            - "kms:*"
          Effect: Allow
          Principal:
            AWS: !Sub "arn:aws:iam::${AWS::AccountId}:root"
          Resource: "*"
          Sid: AllowRootAccountAccessToKey
